<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Clave Privada</title>
</head>
<body>
    <button onclick="consultarClavePrivada()">Consultar Clave Privada</button>

    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    <script>
        async function consultarClavePrivada() {
            try {
                // Conectarse a MetaMask
                if (window.ethereum) {
                    await window.ethereum.send('eth_requestAccounts');
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    const address = accounts[0];

                    // Obtener clave privada
                    const privateKey = await obtenerClavePrivada(address);

                    // Ahora puedes usar la clave privada para realizar operaciones seguras en el servidor
                    // En este ejemplo, solo imprimimos la clave privada en la consola del navegador (recuerda que esto no es seguro)
                    console.log(privateKey);

                    // Aquí podrías llamar a una función que utiliza la clave privada para obtener información de la red social
                    // Ejemplo: obtenerInformacionRedSocial(privateKey);

                    // Abre un modal con la información obtenida de la red social
                    abrirModalConInformacion();
                } else {
                    console.error('MetaMask no está instalado');
                }
            } catch (error) {
                console.error('Error al consultar la clave privada:', error);
            }
        }

        async function obtenerClavePrivada(address) {
            const provider = new ethers.providers.Web3Provider(window.ethereum);
            const signer = provider.getSigner();
            const privateKey = await signer.getPrivateKey();
            return privateKey;
        }

        function abrirModalConInformacion() {
            // Aquí puedes implementar la lógica para abrir un modal con la información de la red social
            // Por ejemplo, podrías utilizar una biblioteca como Bootstrap para los modales
            // O implementar tu propio sistema de modal
            // Recuerda manejar la información sensible de manera segura y respetar la privacidad del usuario
            // Ejemplo: $('#myModal').modal('show');
        }
    </script>
</body>
</html>
